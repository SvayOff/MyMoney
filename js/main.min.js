document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".card__add"),t=document.querySelector(".blank__add"),s=document.querySelector(".blank__add .form"),n=document.querySelector(".card__minus"),c=document.querySelector("#input-add"),d=document.querySelector("#input-desc-add"),a=document.querySelector(".blank__minus"),o=document.querySelector(".blank__minus .form"),l=document.querySelector("#input-minus"),i=document.querySelector("#input-desc-minus"),r=document.querySelector(".card__money-total"),u=document.querySelector(".list"),m=document.querySelector(".list__purchases"),_=document.querySelectorAll(".blank-hide");let v=[],y=0;function p(e){e.classList.add("show"),e.classList.remove("hide")}function h(){r.innerHTML=y}function L(e,t,s){const n=`\n    <div id="${e.id}" class="list__purchas ${t}">\n      <p class="list__purchas-desc">\n          ${e.text}\n      </p>\n      <span class="list__purchas-price">\n          ${e.money}₴\n      </span>\n      <div class="list__purchas-delete ${s} delete">\n          ×\n      </div>\n    </div>\n  `;m.insertAdjacentHTML("afterbegin",n)}function f(){localStorage.setItem("purchases",JSON.stringify(v))}localStorage.getItem("purchases")&&(v=JSON.parse(localStorage.getItem("purchases")),v.forEach((e=>{!0===e.add?(L(e,"add","delete-add"),y+=e.money):(L(e,"minus","delete-minus"),y-=e.money)})),h()),h(),e.addEventListener("click",(()=>p(t))),n.addEventListener("click",(()=>p(a))),_.forEach((e=>{e.addEventListener("click",(()=>{t&&(t.classList.remove("show"),t.classList.add("hide")),a&&(a.classList.remove("show"),a.classList.add("hide"))}))})),u.addEventListener("click",(function(e){e.target.classList.contains("list__title")&&(m.classList.toggle("show"),u.querySelector(".list__title").classList.toggle("active"))})),u.addEventListener("click",(function(e){const t=e.target.closest(".list__purchas");if(e.target.classList.contains("delete-add")){const e=+t.id;for(let t=0;t<v.length;t++)e===v[t].id&&(y-=v[t].money,v.splice(t,1),f(),h());t.remove()}if(e.target.classList.contains("delete-minus")){const e=+t.id;for(let t=0;t<v.length;t++)e===v[t].id&&(y+=v[t].money,v.splice(t,1),f(),h());t.remove()}})),s.addEventListener("submit",(e=>{e.preventDefault();const t=+c.value,s=d.value;c.value="",c.focus(),d.value="";const n={id:Date.now(),money:t,text:s,add:!0};v.push(n),f(),y+=n.money,h(),L(n,"add","delete-add")})),o.addEventListener("submit",(e=>{e.preventDefault();const t=+l.value,s=i.value;l.value="",l.focus(),i.value="";const n={id:Date.now(),money:t,text:s,add:!1};v.push(n),f(),y-=n.money,h(),L(n,"minus","delete-minus")}))}));